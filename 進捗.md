# 230301
 - MVCアーキテクチャっぽい処理の構造を考えてみた
 - いったんmainの基本となる動きを簡単に書いてみた。`main.js`をいじっている。また、`構想.ts`でクラスの構造とかを想像してメモしてある。
 - `main.js`は上に述べた通りだが、とりあえず遊んでみた。
   templateタグによる複製（クローン）と、イベントリスナーの設置はうまくできた
 - ドロップダウンに対するイベントリスナーを設定したが、一個しか正常に動かない。
   →結論、getElementById()なので一個しか対応してないから。クラス名によってelementsを取得してイベントリスナー設定すれば、全部に対応できる(しかし、眠いのでこれで終わる)
### なぐり書き
 - MVCとか考えずに、処理の流れだけを言葉にしてみる
 1. 一番最初は、ドロップダウンにリスナーを設定して、使い勝手のいい状態にする
 1. 次いで作成、検索ボタンにイベントリスナーを設定する
    - イベントリスナーが例えばclickを検知したら、それがイベントハンドラに伝わり、そしてcontrollerにアクションを伝える(そのときのデータもちゃんと伝えていけるように)
    そしてcontrollerがどの要素の上で起こったアクションなのか調べて、それに基づいてModelに指示を出す。※それこそ、ModelのクラスはCRUDUtilitiesみたいな名前でもいいかもしれない
    - 
 1. (検索の場合)入力された全情報をもとにデータベースを検索
 1. 検索結果を、シートから行をそのままコピーしてくる形の配列として取得
    - 実際には、その配列をさらに格納する配列、ということで二次元配列で取得することになると思う。
    - GAS側かjs側かは未定だが、もしor検索を実装するなら一致度を定義して関連度順に並ぶようにしたい
 1. 配列をいい感じに整形してProfileオブジェクトとして扱いやすくする
 1. ViewRendererのスタックにProfile情報を追加して、描画する
    - スタックに全部追加してからまとめて描画するか、スタックに追加するたびに描画するかは未定。ただし、イベントリスナー設定とかは最後にまとめてやったほうが楽だと思うので、まとめて描画するほうがいいとは思う

# 230305
 - データの更新がうまく反映されない問題が発生。`http-server --cache-"もしくはブラウザのdevtoolsのネットワークタブのキャッシュを無効化にチェック
 - 前回の課題であるドロップダウン修正は完了。
 - いくつかのクラスに分けることにした。※import, exportを使うには、サーバーを立ち上げてさらにtype="text/javascript"をtype="module"に変える必要がある
 - 作成ボタンを押すとコントローラーに指示が送られる処理を書くために、まずは作成ボタンを押したらトップのviewのコンテンツを取得するコードを書こうとしたが、init.js内でエラーが出て進めない。おそらくイベントリスナーを設定しても、コールバック関数内においては、初期化時のインスタンスではなく、別のインスタンスがthisにセットされることになるからだろう。
 - 「日程」ボタンを押したらコメント付きの日程が表示できる、というのはなくそう。代わりに、普通に日程のとこで'04/02"初めて参加"'というようにクォーテーションを使えばコメントをつけられるようにする
 - 厳密にMVCっぽくやるなら、イベントハンドラ、もしくはその中で呼ばれる関数をviewのほうにうつしても良い気がしてきた
 - ControllerやModelの分掌を意識して、ファイルを作成した。Modelでスプシとの通信を行う

# 230307
 - スプシのdoPost(e)あたりとの通信が全然うまくいかない。いろいろやって、なんとか「Webアプリにアクセスした状態でコンソールからfetch APIのコードを実行すると正しくレスポンスが帰ってくる」状態を作ることができた。一旦この問題は放置しておく。最終的なデプロイでは一度は絶対ブラウザでアクセスすることになるから、その状態なら正しくレスポンスが帰ってくると思ったため。
 参考サイト：https://teratail.com/questions/qodwcsntzavs5n
 